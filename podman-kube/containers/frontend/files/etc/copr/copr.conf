# COPR Frontend Configuration
# For podman-kube deployment

# Purpose of this instance
ENV="local"

# Database connection
SQLALCHEMY_DATABASE_URI = 'postgresql+psycopg2://copr-fe:coprpass@database:5432/coprdb'

# Backend authentication
BACKEND_PASSWORD = '1234'

# Debug mode
DEBUG = True
SQLALCHEMY_ECHO = False

# Disable emails in local deployment
SEND_EMAILS = False

# URL settings
ENFORCE_PROTOCOL_FOR_FRONTEND_URL = "http"

# Public hostname for users (what they type in browser)
PUBLIC_COPR_HOSTNAME = 'localhost:5000'

# Internal URLs for inter-service communication
# Note: URLs in the UI will show these hostnames - users need to replace with localhost
PUBLIC_COPR_BASE_URL = 'http://frontend:5000'
BACKEND_BASE_URL = 'http://backend-httpd:5002'
DIST_GIT_CLONE_URL = 'http://distgit:5001/git/'
DIST_GIT_URL = 'http://distgit:5001/cgit'
COPR_DIST_GIT_LOGS_URL = 'http://distgit:5001/per-task-logs'

# Logging
LOG_FILENAME = "/var/log/copr-frontend/frontend.log"
LOG_DIR = "/var/log/copr-frontend/"

# Internal network
INTRANET_IPS = ["127.0.0.1", "10.0.0.0/8", "172.16.0.0/12", "192.168.0.0/16"]
BUILDER_IPS = ["127.0.0.1"]

# SRPM storage
STORAGE_DIR = "/var/lib/copr/data/srpm_storage"

# Group denylist
GROUP_DENYLIST = ['fedorabugs', 'packager', 'provenpackager']

# Redis
REDIS_HOST = "redis"
REDIS_PORT = 6379

# Kerberos login (optional)
KRB5_LOGIN = {
   'log_text':     "gssapi-login",
   'email_domain': "fedoraproject.org",
}

# News
NEWS_URL = "https://fedora-copr.github.io/"
NEWS_FEED_URL = "https://fedora-copr.github.io/feed.xml"

OPENID_PROVIDER_URL = "https://id.fedoraproject.org"

# EOL chroot settings
DELETE_EOL_CHROOTS_AFTER = 180
EOL_CHROOTS_NOTIFICATION_PERIOD = 80

# Disable discussion
ENABLE_DISCUSSION = False

# Pagination
ITEMS_PER_PAGE = 10
PAGES_URLS_COUNT = 5

# Build defaults
DEFAULT_BUILD_MEMORY = 2048
MIN_BUILD_MEMORY = 2048
MAX_BUILD_MEMORY = 4096
DEFAULT_BUILD_TIMEOUT = 3600 * 5
MIN_BUILD_TIMEOUT = 0
MAX_BUILD_TIMEOUT = 108000

# Disable caching
CACHE_TYPE = "NullCache"

# Usage treemap teams
USAGE_TREEMAP_TEAMS = {
    "CPT": ["@copr", "@mock", "msuchy", "praiskup", "frostyx", "nikromen"],
    "Packit": ["packit", "packit-stg", "ttomecek"],
    "Python": ["@python", "thrnciar"],
}

# Pulp (optional)
# PULP_CONTENT_URL = "http://pulp:80/pulp/content"

# Server name for manage.py
SERVER_NAME = "frontend"
