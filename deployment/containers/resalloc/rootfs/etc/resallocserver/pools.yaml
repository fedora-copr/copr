# Resalloc pool configuration for local COPR deployment
# Builders are provisioned as podman containers on-demand.

local_x86_64:
  max: 24
  max_starting: 8
  max_prealloc: 0

  tags:
    - arch_noarch
    - arch_x86_64
    - arch_x86_64_native
    - arch_x86_64_v2
    - arch_x86_64_v2_native
    - arch_aarch64
    - arch_aarch64_emulated
    - arch_ppc64le
    - arch_ppc64le_emulated
    - arch_i386
    - arch_i386_native
    - arch_i586
    - arch_i586_native
    - arch_i686
    - arch_i686_native
    - arch_armhfp
    - arch_armhfp_emulated
    - arch_s390x
    - arch_s390x_emulated

  # On-demand tags trigger resource allocation when tickets match.
  # copr_builder must be here (not in tags) since max_prealloc=0 means purely on-demand.
  # Tags from both tags and tags_on_demand are assigned to the resource.
  tags_on_demand:
    - copr_builder

  cmd_new: "/home/resalloc/provision/local-new"
  cmd_delete: "/home/resalloc/provision/local-delete"

  livecheck_period: 180
  reuse_opportunity_time: 0
  reuse_max_count: 0
  reuse_max_time: 0
